<html>

</html>

<head>
    <link rel="icon" type="image/png" href="/favicon.png">
    <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>
    <script async src="https://cdn.jsdelivr.net/gh/iammacheta/prebid-code@latest/prebid.js"></script>

    <script>
        var div_display_m_sizes = [
            [300, 250],
            [336, 280],
            [338, 280],
            [300, 50],
            [320, 100],
            [300, 100],
            [250, 250],
            [200, 200],
        ];
        var div_display_l_sizes = [
            [300, 250],
            [336, 280],
            [338, 280],
            [120, 240],
            [320, 50],
            [320, 100],
            [300, 50],
            [300, 100],
            [250, 360],
            [250, 250],
            [200, 200],
            [320, 480],
            [240, 400],
            [160, 600],
            [300, 600],
            [120, 600],
        ];
        var div_display_footer_d_sizes = [
            [728, 90],
            [970, 90],
            [750, 100],
            [980, 120],
        ];
        var div_display_footer_m_sizes = [
            [320, 50],
            [320, 100],
            [300, 50],
            [300, 100],
            [468, 60],
        ];

        var PREBID_TIMEOUT = 1000;
        var FAILSAFE_TIMEOUT = 3000;

        var adUnits = [
            {
                code: '/21974715207/web-destiny-2-display-m',
                mediaTypes: {
                    banner: {
                        sizes: div_display_m_sizes
                    }
                },
                bids: [
                    {
                        bidder: 'pubmatic',
                        params: {
                            publisherId: '165261',
                            adSlot: '6141440'
                        }
                    },
                    {
                        bidder: 'appnexus',
                        params: {
                            placementId: 34122281,
                            allowSmallerSizes: true,
                            position: 'above'
                        }
                    }]
            },
            {
                code: '/21974715207/web-destiny-2-display-l',
                mediaTypes: {
                    banner: {
                        sizes: div_display_l_sizes
                    }
                },
                bids: [
                    {
                        bidder: 'pubmatic',
                        params: {
                            publisherId: '165261',
                            adSlot: '6141441'
                        }
                    }, {
                        bidder: 'appnexus',
                        params: {
                            placementId: 34122285,
                            allowSmallerSizes: true,
                        }
                    }]
            },
            {
                code: '/21974715207/web-destiny-2-display-footer-d',
                mediaTypes: {
                    banner: {
                        sizes: div_display_footer_d_sizes
                    }
                },
                bids: [
                    {
                        bidder: 'pubmatic',
                        params: {
                            publisherId: '165261',
                            adSlot: '6141442'
                        }
                    },
                    {
                        bidder: 'appnexus',
                        params: {
                            placementId: 34122289,
                            allowSmallerSizes: true,
                            position: 'above'
                        }
                    }]
            },
            {
                code: '/21974715207/web-destiny-2-display-footer-m',
                mediaTypes: {
                    banner: {
                        sizes: div_display_footer_m_sizes
                    }
                },
                bids: [
                    {
                        bidder: 'pubmatic',
                        params: {
                            publisherId: '165261',
                            adSlot: '6141443'
                        }
                    },
                    {
                        bidder: 'appnexus',
                        params: {
                            placementId: 34122291,
                            allowSmallerSizes: true,
                            position: 'above'
                        }
                    }]
            },
        ];

        const customConfigObject = {
            "buckets": [
                {
                    "max": 3,
                    "increment": 0.01
                },
                {
                    "max": 5,
                    "increment": 0.05
                },
                {
                    "max": 9,
                    "increment": 0.1
                },
                {
                    "max": 40,
                    "increment": 0.5
                },
                {
                    "max": 100,
                    "increment": 10.00
                }
            ]
        };

        // ======== DO NOT EDIT BELOW THIS LINE =========== //
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
        googletag.cmd.push(function () {
            googletag.pubads().disableInitialLoad();
        });

        var pbjs = pbjs || {};
        pbjs.que = pbjs.que || [];

        pbjs.que.push(function () {
            pbjs.setConfig({
                enableSendAllBids: false,
                priceGranularity: customConfigObject,
                consentManagement: {
                    // GPP Consent Management Module
                    gpp: {
                        cmpApi: 'iab',
                        timeout: 8000,
                    },
                    // TCF Consent Management Module
                    gdpr: {
                        cmpApi: 'iab',
                        timeout: 8000,
                        defaultGdprScope: true,
                        // TCF Control Module
                        rules: [{
                            purpose: "storage",
                            enforcePurpose: true,
                            enforceVendor: true
                        }, {
                            purpose: "basicAds",
                            enforcePurpose: true,
                            enforceVendor: true
                        }, {
                            purpose: "personalizedAds",
                            enforcePurpose: true,
                            enforceVendor: true
                        }, {
                            purpose: "measurement",
                            enforcePurpose: true,
                            enforceVendor: true
                        }, {
                            purpose: "transmitPreciseGeo",
                            enforcePurpose: true
                        }]
                    },
                    usp: {
                        timeout: 100
                    }
                },
                // GPT Pre-Auction Module
                gptPreAuction: {
                    enabled: true,
                },
                // Currency Module
                currency: {
                    adServerCurrency: 'USD',  // GAM server is USD
                    granularityMultiplier: 1,  // default bid granularity
                    defaultRates: {            // Optional: Fallback rates if the currency conversion service is unavailable
                        'EUR': 1.10,
                        'GBP': 1.30
                    },
                    conversionRateFile: 'https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json', // URL to the Prebid conversion rate file
                },
                userSync: {
                    filterSettings: {
                        iframe: {
                            bidders: ['pubmatic', 'appnexus', 'openx', 'ix', 'rubicon', 'sovrn', 'smartadserver', 'criteo', 'ogury'],
                            filter: 'include'
                        }
                    }
                }
            });
            pbjs.addAdUnits(adUnits);
            pbjs.requestBids({
                bidsBackHandler: initAdserver,
                timeout: PREBID_TIMEOUT
            });
        });

        function initAdserver() {
            if (pbjs.initAdserverSet) return;
            pbjs.initAdserverSet = true;
            googletag.cmd.push(function () {
                pbjs.que.push(function () {
                    pbjs.setTargetingForGPTAsync();
                    googletag.pubads().refresh();
                });
            });
        }
        // in case PBJS doesn't load
        setTimeout(function () {
            initAdserver();
        }, FAILSAFE_TIMEOUT);

        // ====================================== //

        googletag.cmd.push(function () {
            googletag.defineSlot('/21974715207/web-destiny-2-display-m', div_display_m_sizes, 'div_display_m').addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
        googletag.cmd.push(function () {
            googletag.defineSlot('/21974715207/web-destiny-2-display-l', div_display_l_sizes, 'div_display_l').addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
        googletag.cmd.push(function () {
            googletag.defineSlot('/21974715207/web-destiny-2-display-footer-d', div_display_footer_d_sizes, 'div_display_footer_d').addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
        googletag.cmd.push(function () {
            googletag.defineSlot('/21974715207/web-destiny-2-display-footer-m', div_display_footer_m_sizes, 'div_display_footer_m').addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
    </script>
</head>

<body>
    <h2>Basic Prebid.js Example</h2>
    <h5>Div display_m</h5>
    <div id='div_display_m' style='width: 336px; height: 280px;'>
        <script type='text/javascript'>
            googletag.cmd.push(function () {
                googletag.display('div_display_m');
            });
        </script>
    </div>

    <br>

    <h5>Div display_l</h5>
    <div id='div_display_l' style='width: 300px; height: 600px;'>
        <script type='text/javascript'>
            googletag.cmd.push(function () {
                googletag.display('div_display_l');
            });
        </script>
    </div>

    <h5>Div display_footer_d</h5>
    <div id='div_display_footer_d' style='width: 728px; height: 90px;'>
        <script type='text/javascript'>
            googletag.cmd.push(function () {
                googletag.display('div_display_footer_d');
            });
        </script>
    </div>

    <h5>Div display_footer_m</h5>
    <div id='div_display_footer_m' style='width: 320px; height: 100px;'>
        <script type='text/javascript'>
            googletag.cmd.push(function () {
                googletag.display('div_display_footer_m');
            });
        </script>
    </div>
</body>

</html>